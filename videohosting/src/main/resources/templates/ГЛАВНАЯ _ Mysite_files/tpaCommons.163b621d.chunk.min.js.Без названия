(window.webpackJsonp__wix_thunderbolt_app=window.webpackJsonp__wix_thunderbolt_app||[]).push([[103],{392:function(e,n,t){"use strict";t.r(n),t.d(n,"site",(function(){return s}));var a=t(31),r=t(561),o=t(264);t.d(n,"MasterPageTpaPropsCacheSymbol",(function(){return o.a})),t.d(n,"TpaSrcBuilderSymbol",(function(){return o.e})),t.d(n,"TpaContextMappingSymbol",(function(){return o.b}));var i=t(562),c=t(564),u=t(563),d=t(565);t.d(n,"TpaHandlersManagerSymbol",(function(){return o.c})),t.d(n,"TpaSectionSymbol",(function(){return o.d})),t.d(n,"name",(function(){return o.f}));var l=t(470);for(var p in l)["default","site","TpaHandlersManagerSymbol","TpaSectionSymbol","name","MasterPageTpaPropsCacheSymbol","TpaSrcBuilderSymbol","TpaContextMappingSymbol"].indexOf(p)<0&&function(e){t.d(n,e,(function(){return l[e]}))}(p);var s=function(e){e(a.a.AppDidMountHandler).to(r.a),e(o.a).to(i.a),e(o.b).to(u.a),e(o.e).to(c.a),e(o.d).to(d.a)}},470:function(e,n){},535:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t(0),r=function(e,n){var t=e.split("/"),r=t.indexOf(n||"");return r<0||t[r]!==n?null:Object(a.e)(t.splice(r)).slice(1)}},561:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));var a=t(0),r=t(7),o=t(373),i=t(61),c=t(13),u=t(264),d=t(292),l=t(163),p=function(e){if(e.data)try{return JSON.parse(e.data)}catch(e){}return{}},s=["getWixUpgradeUrl","stylesReady","getViewModeInternal","setHelpArticle"],f=Object(r.h)([d.a,c.a,u.b,o.e,o.c,i.f,Object(r.g)(l.a)],(function(e,n,t,r,o,i,c){return{appDidMount:function(){e.addWindowMessageHandler({canHandleEvent:function(e){return!!(e.source&&(n=p(e),n&&["TPA","TPA2"].includes(n.intent)));var n},handleEvent:function(e){return Object(a.b)(this,void 0,void 0,(function(){var o,d,l,f,g,v,m;return Object(a.d)(this,(function(b){switch(b.label){case 0:return o=p(e),d=o.type,l=o.callId,s.includes(d)?[2]:(f=function(e){var n=e.compId;if(n)return t.getTpaComponentContextId(n)||r.getContextIdOfCompId(n)}(o),g=t.getTpaComponentIdFromTemplate(o.compId),v=Object(a.a)(Object(a.a)({},o),{compId:null!=g?g:o.compId}),m=v.compId,c&&c.tpa.addMessage({msg:v,compId:m,contextId:f}),f?[4,(I=f,Object(a.b)(void 0,void 0,Promise,(function(){return Object(a.d)(this,(function(e){switch(e.label){case 0:return[4,n(I)];case 1:return[2,e.sent().getAllImplementersOnPageOf(u.c)[0]]}}))})))]:(console.error("TPA handler message caller does not belong to any page",{type:d,callId:l,compId:m}),[2]));case 1:return b.sent().handleMessage(e.source,v).catch((function(e){console.error("HandleTpaMessageError",d,f,m,e),i.captureError(e,{tags:{feature:"tpa",handlerName:d},extra:{handlerName:d,compId:m}})})),[2]}var I}))}))}})}}}))},562:function(e,n,t){"use strict";t.d(n,"a",(function(){return u}));var a=t(9),r=t.n(a),o=t(7),i=t(373),c=t(260),u=Object(o.h)([i.c,c.a],(function(e,n){var t={};return{cacheProps:function(n,a){var o=r.a.omitBy(a||e.get(n),r.a.isFunction);t[n]=r.a.isEmpty(o)?null:o},getCachedProps:function(e){var a,o,i,c,u=t[e];if(u)return r.a.isEqual(null===(o=null===(a=n.getCurrentRouteInfo())||void 0===a?void 0:a.dynamicRouteData)||void 0===o?void 0:o.publicData,null===(c=null===(i=n.getPreviousRouterInfo())||void 0===i?void 0:i.dynamicRouteData)||void 0===c?void 0:c.publicData)||delete u.src,u}}}))},563:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t(7),r=Object(a.h)([],(function(){var e={},n={};return{registerTpasForContext:function(n,t){t.forEach((function(t){e[t]=n}))},getTpaComponentContextId:function(n){return e[n]},registerTpaTemplateId:function(e,t){n[e]=t},getTpaComponentIdFromTemplate:function(e){return n[e]}}}))},564:function(e,n,t){"use strict";t.d(n,"a",(function(){return y}));var a=t(0),r=t(7),o=t(373),i=t(23),c=t(61),u=t(260),d=t(377),l=t(365),p=t(264),s=t(27),f=t(28),g=t(22),v=t(9),m=t.n(v),b=t(161),I=t(535),h=function(e){var n,t=e.getCurrentConsentPolicy();return(n=t).defaultPolicy&&m.a.every(n.policy)||!e._getConsentPolicyHeader()["consent-policy"]?void 0:decodeURIComponent(e._getConsentPolicyHeader()["consent-policy"])},y=Object(r.h)([o.c,Object(r.f)(i.f,p.f),s.a,f.a,c.b,g.a,u.a,d.a,l.b,Object(r.g)(b.a)],(function(e,n,t,r,o,i,c,u,d,l){var p=n.widgetsClientSpecMapData,s=n.siteRevision,f=n.viewMode,g=n.appSectionParams,v=n.externalBaseUrl,b=n.requestUrl,y=n.extras,C=n.deviceType,O=n.tpaDebugParams,P=n.locale,T=n.timeZone,S=function(){return o?o.location.href:b},w=function(e,n,t,r){var o,i=Boolean(t.tpaPageUri&&!m.a.isNil(n)&&n===t.tpaApplicationId),c=Object(a.e)(S().replace(v,"").split("?"),1)[0],u=Object(a.e)(decodeURIComponent(c).split("?"),2),d=u[0],l=u[1],p=i&&Object(I.a)(d,t.tpaPageUri);return p&&(null===(o=r.appPage)||void 0===o?void 0:o.defaultPage)&&p.unshift(r.appPage.defaultPage),p?function(e,n,t){if(0===e.length)return n;var a=e.join("/"),r=new URL(n);(r.pathname+="/"+a,t)&&new URLSearchParams(t).forEach((function(e,n){return r.searchParams.append(n,e)}));return r.href}(p,e,l):e};return{buildSrc:function(e,n,u,v,b){var I,j,R,x;void 0===b&&(b={});var D=m.a.merge({tpaInnerRouteConfig:null,extraQueryParams:{},appDefinitionId:""},b),M=u.widgetId,U=u.width,N=u.height,A=u.externalId,E=u.templateId,L=p[M]||{},_=L.applicationId,H=L.appDefinitionId||D.appDefinitionId,B=null===(j=null===(I=c.getCurrentRouteInfo())||void 0===I?void 0:I.dynamicRouteData)||void 0===j?void 0:j.publicData,F=E||e,J=e,k=JSON.stringify(i.getCommonConfigForUrl()),q=new URL(S()),Q=Object(a.a)(Object(a.a)({instance:t.getAppInstanceByAppDefId(H),pageId:n,compId:F,viewerCompId:J,siteRevision:""+s,viewMode:f,deviceType:C,externalId:A,locale:P,commonConfig:k,tz:T,vsi:d.viewerSessionId,"consent-policy":h(r),currency:y.currency,currentCurrency:q.searchParams.get("currency")||y.currency,width:m.a.isNumber(U)?""+U:null,height:m.a.isNumber(N)?""+N:null},function(){if(o){var e=new URL(S()).searchParams.get("appSectionParams");return JSON.parse(decodeURIComponent(e||"{}"))||{}}return g}()),D.extraQueryParams);l&&(Q.lang=null===(R=l.currentLanguage)||void 0===R?void 0:R.languageCode,Q.dateNumberFormat=null===(x=l.currentLanguage)||void 0===x?void 0:x.locale,m.a.isNil(l.isOriginalLanguage)||(Q.isPrimaryLanguage=""+l.isOriginalLanguage)),B&&(Q.routerData=JSON.stringify(B)),m.a.entries(O).forEach((function(e){var n=Object(a.e)(e,2),t=n[0],r=n[1];m.a.isNil(r)||(Q[t]=r)}));var W=D.tpaInnerRouteConfig?w(v,_,D.tpaInnerRouteConfig,L):v,z=new URL(W);return m.a.entries(Q).forEach((function(e){var n=Object(a.e)(e,2),t=n[0],r=n[1];m.a.isNil(r)||z.searchParams.set(t,r)})),z.href}}}))},565:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var a=t(7),r=Object(a.h)([],(function(){var e={},n={};return{registerTpaSection:function(t,a){e[t]=a,n[a.appDefinitionId]=t},unregisterTpaSection:function(t){var a=e[t],r=null==a?void 0:a.appDefinitionId;delete e[t],r&&delete n[r]},getTpaSectionByAppDefinitionId:function(t){var a=n[t];return e[a]}}}))}}]);
//# sourceMappingURL=https://static.parastorage.com/services/wix-thunderbolt/dist/tpaCommons.163b621d.chunk.min.js.map